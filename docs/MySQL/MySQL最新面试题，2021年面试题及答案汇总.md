# MySQL最新面试题，2021年面试题及答案汇总







### 1、limit 1000000 加载很慢的话，你是怎么解决的呢？

**方案一：**如果id是连续的，可以这样，返回上次查询的最大记录(偏移量)，再往下limit

```
select id，name from employee where id>1000000 limit 10.
```

**方案二：**在业务允许的情况下限制页数：

建议跟业务讨论，有没有必要查这么后的分页啦。因为绝大多数用户都不会往后翻太多页。

**方案三：**order by + 索引（id为索引）

```
select id，name from employee order by id  limit 1000000，10
```

**方案四：**利用延迟关联或者子查询优化超多分页场景。（先快速定位需要获取的id段，然后再关联）

```
SELECT a.* FROM employee a, (select id from employee where 条件 LIMIT 1000000,10 ) b where a.id=b.id
```


### 2、索引有哪些优缺点？

**优点：**

**1、** 唯一索引可以保证数据库表中每一行的数据的唯一性

**2、** 索引可以加快数据查询速度，减少查询时间

**缺点：**

**1、** 创建索引和维护索引要耗费时间

**2、** 索引需要占物理空间，除了数据表占用数据空间之外，每一个索引还要占用一定的物理空间

**3、** 以表中的数据进行增、删、改的时候，索引也要动态的维护。


### 3、读写分离有哪些解决方案？

读写分离是依赖于主从复制，而主从复制又是为读写分离服务的。因为主从复制要求`slave`不能写只能读（如果对`slave`执行写操作，那么`show slave status`将会呈现`Slave_SQL_Running=NO`，此时你需要按照前面提到的手动同步一下`slave`）。

**方案一**

使用MySQL-proxy代理

**优点：**

直接实现读写分离和负载均衡，不用修改代码，master和slave用一样的帐号，MySQL官方不建议实际生产中使用

**缺点：**

降低性能， 不支持事务

**方案二**

**1、** 使用AbstractRoutingDataSource+aop+annotation在dao层决定数据源。

**2、** 如果采用了mybatis， 可以将读写分离放在ORM层，比如mybatis可以通过mybatis plugin拦截sql语句，所有的insert/update/delete都访问master库，所有的select 都访问salve库，这样对于dao层都是透明。 plugin实现时可以通过注解或者分析语句是读写方法来选定主从库。不过这样依然有一个问题， 也就是不支持事务， 所以我们还需要重写一下DataSourceTransactionManager， 将read-only的事务扔进读库， 其余的有读有写的扔进写库。

**方案三**

**1、** 使用AbstractRoutingDataSource+aop+annotation在service层决定数据源，可以支持事务.

**2、** 缺点：类内部方法通过this.xx()方式相互调用时，aop不会进行拦截，需进行特殊处理。


### 4、LIKE声明中的％和_是什么意思？

％对应于0个或更多字符，_只是LIKE语句中的一个字符。


### 5、视图有哪些特点？哪些使用场景？

**视图特点：**

**1、** 视图的列可以来自不同的表，是表的抽象和在逻辑意义上建立的新关系。

**2、** 视图是由基本表(实表)产生的表(虚表)。

**3、** 视图的建立和删除不影响基本表。

**4、** 对视图内容的更新(添加，删除和修改)直接影响基本表。

**5、** 当视图来自多个基本表时，不允许添加和删除数据。

**视图用途：** 简化sql查询，提高开发效率，兼容老的表结构。

**视图的常见使用场景：**

**1、** 重用SQL语句；

**2、** 简化复杂的SQL操作。

**3、** 使用表的组成部分而不是整个表；

**4、** 保护数据

**5、** 更改数据格式和表示。视图可返回与底层表的表示和格式不同的数据。


### 6、读写分离常见方案？

**1、** 应用程序根据业务逻辑来判断，增删改等写操作命令发给主库，查询命令发给备库。

**2、** 利用中间件来做代理，负责对数据库的请求识别出读还是写，并分发到不同的数据库中。（如：amoeba，MySQL-proxy）


### 7、覆盖索引、回表等这些，了解过吗？

覆盖索引： 查询列要被所建的索引覆盖，不必从数据表中读取，换句话说查询列要被所使用的索引覆盖。

回表：二级索引无法直接查询所有列的数据，所以通过二级索引查询到聚簇索引后，再查询到想要的数据，这种通过二级索引查询出来的过程，就叫做回表。

网上这篇文章讲得很清晰： [MySQL覆盖索引与回表](https://link.zhihu.com/?target=https%3A//www.jianshu.com/p/8991cbca3854)


### 8、主键使用自增ID还是UUID，为什么？

如果是单机的话，选择自增ID；如果是分布式系统，优先考虑UUID吧，但还是最好自己公司有一套分布式唯一ID生产方案吧。

**1、** 自增ID：数据存储空间小，查询效率高。但是如果数据量过大,会超出自增长的值范围，多库合并，也有可能有问题。

**2、** uuid：适合大量数据的插入和更新操作，但是它无序的，插入数据效率慢，占用空间大。


### 9、什么情况下设置了索引但无法使用

**1、** 以“%”开头的LIKE语句，模糊匹配

**2、** OR语句前后没有同时使用索引

**3、** 数据类型出现隐式转化（如varchar不加单引号的话可能会自动转换为int型）


### 10、MySQL自增主键用完了怎么办？

自增主键一般用int类型，一般达不到最大值，可以考虑提前分库分表的。


### 11、说说分库与分表的设计
### 12、什么是死锁？怎么解决？
### 13、怎么优化SQL查询语句吗
### 14、超大分页怎么处理？
### 15、MySQL中TEXT数据类型的最大长度
### 16、使用索引查询一定能提高查询的性能吗？为什么
### 17、MySQL的binlog有有几种录入格式？分别有什么区别？
### 18、MySQL如何获取当前日期？
### 19、读写分离常见方案？
### 20、B树和B+树的区别，数据库为什么使用B+树而不是B树？
### 21、你是如何监控你们的数据库的？你们的慢日志都是怎么查询的？
### 22、为什么要使用视图？什么是视图？
### 23、视图的缺点
### 24、什么是触发器？触发器的使用场景有哪些？
### 25、MySQL存储引擎MyISAM与InnoDB区别
### 26、MySQL有关权限的表都有哪几个
### 27、什么是幻读，脏读，不可重复读呢？
### 28、覆盖索引是什么？
### 29、一条Sql的执行顺序？
### 30、锁的优化策略




## 全部答案，整理好了，直接下载吧

### 下载链接：[全部答案，整理好了](https://www.souyunku.com/wp-content/uploads/weixin/githup-weixin-2.png)




## 最新，高清PDF：172份，7701页，最新整理

[![大厂面试题](https://www.souyunku.com/wp-content/uploads/weixin/mst.png "架构师专栏")](https://www.souyunku.com/wp-content/uploads/weixin/githup-weixin.png "架构师专栏")

[![大厂面试题](https://www.souyunku.com/wp-content/uploads/weixin/githup-weixin.png "架构师专栏")](https://www.souyunku.com/wp-content/uploads/weixin/githup-weixin.png "架构师专栏")
