# MySQL最新面试题及答案整理，汇总版







### 1、什么是触发器？触发器的使用场景有哪些？

触发器是用户定义在关系表上的一类由事件驱动的特殊的存储过程。触发器是指一段代码，当触发某个事件时，自动执行这些代码。

**使用场景**

**1、** 可以通过数据库中的相关表实现级联更改。

**2、** 实时监控某张表中的某个字段的更改而需要做出相应的处理。

**3、** 例如可以生成某些业务的编号。

**4、** 注意不要滥用，否则会造成数据库及应用程序的维护困难。

**5、** 大家需要牢记以上基础知识点，重点是理解数据类型CHAR和VARCHAR的差异，表存储引擎InnoDB和MyISAM的区别。


### 2、什么是游标？

游标提供了一种对从表中检索出的数据进行操作的灵活手段，就本质而言，游标实际上是一种能从包括多条数据记录的结果集中每次提取一条记录的机制。


### 3、MySQL数据库cpu飙升的话，要怎么处理呢？

**「排查过程：」**

使用top 命令观察，确定是MySQLd导致还是其他原因。

如果是MySQLd导致的，show processlist，查看session情况，确定是不是有消耗资源的sql在运行。

找出消耗高的 sql，看看执行计划是否准确， 索引是否缺失，数据量是否太大。

**「处理：」**

kill 掉这些线程(同时观察 cpu 使用率是否下降)，

进行相应的调整(比如说加索引、改 sql、改内存参数)

重新跑这些 SQL。

**「其他情况：」**

也有可能是每个 sql 消耗资源并不多，但是突然之间，有大量的 session 连进来导致 cpu 飙升，这种情况就需要跟应用一起来分析为何连接数会激增，再做出相应的调整，比如说限制连接数等


### 4、在高并发情况下，如何做到安全的修改同一行数据？

要安全的修改同一行数据，就要保证一个线程在修改时其它线程无法更新这行记录。一般有悲观锁和乐观锁两种方案~


### 5、MySQL中有哪几种锁？

1.表级锁：开销小，加锁快；不会出现死锁；锁定粒度大，发生锁冲突的概率最高，并发度最低。

2.行级锁：开销大，加锁慢；会出现死锁；锁定粒度最小，发生锁冲突的概率最低，并发度也最高。

3\、页面锁：开销和加锁时间界于表锁和行锁之间；会出现死锁；锁定粒度界于表锁和行锁之间，并发度一般。


### 6、MySQL5.6和MySQL5.7对索引做了哪些优化？

**1、** MySQL5.6引入了索引下推优化，默认是开启的。

**2、** 例子：user表中（a,b,c）构成一个索引。

**3、** select * from user where a='23' and b like '%eqw%' and c like 'dasd'。

**4、** 解释：如果没有索引下推原则，则MySQL会通过a='23' 先查询出一个对应的数据。然后返回到MySQL服务端。MySQL服务端再基于两个like模糊查询来校验and查询出的数据是否符合条件。这个过程就设计到回表操作。

**5、** 如果使用了索引下推技术，则MySQL会首先返回返回条件a='23'的数据的索引，然后根据模糊查询的条件来校验索引行数据是否符合条件，如果符合条件，则直接根据索引来定位对应的数据，如果不符合直接reject掉。因此，有了索引下推优化，可以在有like条件的情况下，减少回表的次数。


### 7、使用B树的好处

B树可以在内部节点同时存储键和值，因此，把频繁访问的数据放在靠近根节点的地方将会大大提高热点数据的查询效率。这种特性使得B树在特定数据重复多次查询的场景中更加高效。


### 8、为什么索引结构默认使用B+Tree，而不是Hash，二叉树，红黑树？

B+tree：因为B树不管叶子节点还是非叶子节点，都会保存数据，这样导致在非叶子节点中能保存的指针数量变少（有些资料也称为扇出），指针少的情况下要保存大量数据，只能增加树的高度，导致IO操作变多，查询性能变低；

Hash：虽然可以快速定位，但是没有顺序，IO复杂度高。

二叉树：树的高度不均匀，不能自平衡，查找效率跟数据有关（树的高度），并且IO代价高。

红黑树：树的高度随着数据量增加而增加，IO代价高。


### 9、如何选择合适的分布式主键方案呢？

**1、** 数据库自增长序列或字段。

**2、** UUID。

**3、** Redis生成ID

**4、** Twitter的snowflake算法

**5、** 利用zookeeper生成唯一ID

**6、** MongoDB的ObjectId


### 10、列的字符串类型可以是什么？

字符串类型是：

**1、**  SET

**2、**  BLOB

**3、**  ENUM

**4、**  CHAR

**5、**  TEXT


### 11、MySQL的复制原理以及流程
### 12、怎么查询SQL语句是否使用了索引查询？
### 13、4.说说分库与分表的设计
### 14、数据库经常使用的函数
### 15、覆盖索引、回表等这些，了解过吗？
### 16、linux添加索引
### 17、SQL注入漏洞产生的原因？如何防止？
### 18、什么是MySQL?
### 19、MySQL中in 和exists的区别。
### 20、数据库的乐观锁和悲观锁。
### 21、500台db，在最快时间之内重启。
### 22、MySQL中InnoDB支持的四种事务隔离级别名称，以及逐级之间的区别？
### 23、如何优化长难的查询语句？有实战过吗？
### 24、MySQL事务得四大特性以及实现原理
### 25、InnoDB引擎的4大特性
### 26、SQL 约束有哪几种呢？
### 27、优化数据库的方法
### 28、MYSQL的主从延迟，你怎么解决？
### 29、从锁的类别角度讲，MySQL都有哪些锁呢？
### 30、什么是数据库连接池?为什么需要数据库连接池呢?




## 全部答案，整理好了，直接下载吧

### 下载链接：[全部答案，整理好了](https://www.souyunku.com/wp-content/uploads/weixin/githup-weixin-2.png)




## 最新，高清PDF：172份，7701页，最新整理

[![大厂面试题](https://www.souyunku.com/wp-content/uploads/weixin/mst.png "架构师专栏")](https://www.souyunku.com/wp-content/uploads/weixin/githup-weixin.png "架构师专栏")

[![大厂面试题](https://www.souyunku.com/wp-content/uploads/weixin/githup-weixin.png "架构师专栏")](https://www.souyunku.com/wp-content/uploads/weixin/githup-weixin.png "架构师专栏")
