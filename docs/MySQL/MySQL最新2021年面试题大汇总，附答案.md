# MySQL最新2021年面试题大汇总，附答案







### 1、MySQL_fetch_array和MySQL_fetch_object的区别是什么？

以下是MySQL_fetch_array和MySQL_fetch_object的区别：

MySQL_fetch_array（） – 将结果行作为关联数组或来自数据库的常规数组返回。

MySQL_fetch_object – 从数据库返回结果行作为对象。


### 2、MySQL数据库cpu飙升到500%的话他怎么处理？

**1、** 当 cpu 飙升到 500%时，先用操作系统命令 top 命令观察是不是 MySQLd 占用导致的，如果不是，找出占用高的进程，并进行相关处理。

**2、** 如果是 MySQLd 造成的， show processlist，看看里面跑的 session 情况，是不是有消耗资源的 sql 在运行。找出消耗高的 sql，看看执行计划是否准确， index 是否缺失，或者实在是数据量太大造成。

**3、** 一般来说，肯定要 kill 掉这些线程(同时观察 cpu 使用率是否下降)，等进行相应的调整(比如说加索引、改 sql、改内存参数)之后，再重新跑这些 SQL。

**4、** 也有可能是每个 sql 消耗资源并不多，但是突然之间，有大量的 session 连进来导致 cpu 飙升，这种情况就需要跟应用一起来分析为何连接数会激增，再做出相应的调整，比如说限制连接数等


### 3、MySql, Oracle，Sql Service的区别

**1、** Sql Service只能在Windows上使用，而MySql和Oracle可以在其他系统上使用， 而且可以支持数据库不同系统之间的移植

**2、** MySql开源免费的，Sql Service和Oracle要钱。

**3、** 我从小到大排序哈，MySql很小，Sql Service居中，Oracle最大

**4、** Oracle支持大并发量，大访问量，Sql Service还行，而MySql的话压力没这么大，因此现在的MySql的话最好是要使用集群或者缓存来搭配使用

**5、** Oracle支持多用户不同权限来进行操作，而MySql只要有登录权限就可操作全部数据库

**6、** 安装所用的空间差别也是很大的，MySQL安装完后才几百M而Oracle有几G左右，且使用的时候Oracle占用特别大的内存空间和其他机器性能。

**7、** 做分页的话，MySql使用Limit，Sql Service使用top，Oracle使用row

**8、** Oracle没有自动增长类型，MySQL和Sql Service一般使用自动增长类型


### 4、什么是最左前缀原则？什么是最左匹配原则

**1、** 顾名思义，就是最左优先，在创建多列索引时，要根据业务需求，where子句中使用最频繁的一列放在最左边。

**2、** 最左前缀匹配原则，非常重要的原则，MySQL会一直向右匹配直到遇到范围查询(>、<、between、like)就停止匹配，比如a = 1 and b = 2 and c > 3 and d = 4 如果建立(a,b,c,d)顺序的索引，d是用不到索引的，如果建立(a,b,d,c)的索引则都可以用到，a,b,d的顺序可以任意调整。

**3、** =和in可以乱序，比如a = 1 and b = 2 and c = 3 建立(a,b,c)索引可以任意顺序，MySQL的查询优化器会帮你优化成索引可以识别的形式


### 5、drop、delete与truncate的区别

三者都表示删除，但是三者有一些差别：

| 比较 | Delete | Truncate | Drop |
| --- | --- | --- | --- |
| 类型 | 属于DML | 属于DDL | 属于DDL |
| 回滚 | 可回滚 | 不可回滚 | 不可回滚 |
| 删除内容 | 表结构还在，删除表的全部或者一部分数据行 | 表结构还在，删除表中的所有数据 | 从数据库中删除表，所有的数据行，索引和权限也会被删除 |
| 删除速度 | 删除速度慢，需要逐行删除 | 删除速度快 | 删除速度最快 |


因此，在不再需要一张表的时候，用drop；在想删除部分数据行时候，用delete；在保留表而删除所有数据的时候用truncate。


### 6、MySQL一条SQL加锁分析

一条SQL加锁，可以分9种情况进行：

**1、** 组合一：id列是主键，RC隔离级别

**2、** 组合二：id列是二级唯一索引，RC隔离级别

**3、** 组合三：id列是二级非唯一索引，RC隔离级别

**4、** 组合四：id列上没有索引，RC隔离级别

**5、** 组合五：id列是主键，RR隔离级别

**6、** 组合六：id列是二级唯一索引，RR隔离级别

**7、** 组合七：id列是二级非唯一索引，RR隔离级别

**8、** 组合八：id列上没有索引，RR隔离级别

**9、** 组合九：Serializable隔离级别

### 7、什么是SQL？

结构化查询语言(Structured Query Language)


### 8、如何优化查询过程中的数据访问

**1、** 访问数据太多导致查询性能下降

**2、** 确定应用程序是否在检索大量超过需要的数据，可能是太多行或列

**3、** 确认MySQL服务器是否在分析大量不必要的数据行

**4、** 避免犯如下SQL语句错误

**5、** 避免查询不需要的数据。解决办法：使用limit解决

**6、** 多表关联返回全部列。解决办法：指定列名

**7、** 总是返回全部列。解决办法：避免使用SELECT *

**8、** 重复查询相同的数据。解决办法：可以缓存数据，下次直接读取缓存

**9、** 使用explain进行分析，如果发现查询需要扫描大量的数据，但只返回少数的行，可以通过如下技巧去优化：

**10、** 使用索引覆盖扫描，把所有的列都放到索引中，这样存储引擎不需要回表获取对应行就可以返回结果。

**11、** 改变数据库和表的结构，修改数据表范式

**12、** 重写SQL语句，让优化器可以以更优的方式执行查询。


### 9、B+树在满足聚簇索引和覆盖索引的时候不需要回表查询数据？

在B+树的索引中，叶子节点可能存储了当前的key值，也可能存储了当前的key值以及整行的数据，这就是聚簇索引和非聚簇索引。 在InnoDB中，只有主键索引是聚簇索引，如果没有主键，则挑选一个唯一键建立聚簇索引。如果没有唯一键，则隐式的生成一个键来建立聚簇索引。

当查询使用聚簇索引时，在对应的叶子节点，可以获取到整行数据，因此不用再次进行回表查询。


### 10、索引有哪几种类型？

**1、** 主键索引: 数据列不允许重复，不允许为NULL，一个表只能有一个主键。

**2、** 唯一索引: 数据列不允许重复，允许为NULL值，一个表允许多个列创建唯一索引。

**3、** 普通索引: 基本的索引类型，没有唯一性的限制，允许为NULL值。

**4、** 全文索引：是目前搜索引擎使用的一种关键技术，对文本的内容进行分词、搜索。

**5、** 覆盖索引：查询列要被所建的索引覆盖，不必读取数据行

**6、** 组合索引：多列值组成一个索引，用于组合搜索，效率大于索引合并


### 11、MySQL中int(20)和char(20)以及varchar(20)的区别
### 12、什么是通用SQL函数？
### 13、MySQL 索引使用有哪些注意事项呢？
### 14、为表中得字段选择合适得数据类型
### 15、数据库的乐观锁和悲观锁是什么？怎么实现的？
### 16、MySQL中DATETIME和TIMESTAMP的区别
### 17、SQL的生命周期？
### 18、MySQL的复制原理以及流程
### 19、你怎么知道SQL语句性能是高还是低
### 20、MySQL如何优化DISTINCT？
### 21、MVCC熟悉吗，它的底层原理？
### 22、SQL语句主要分为哪几类
### 23、备份计划，MySQLdump以及xtranbackup的实现原理
### 24、优化数据库的方法
### 25、简单描述MySQL中，索引，主键，唯一索引，联合索引的区别，对数据库的性能有什么影响（从读写两方面）
### 26、MySQL 遇到过死锁问题吗，你是如何解决的？
### 27、组合索引是什么？为什么需要注意组合索引中的顺序？
### 28、数据库自增主键可能遇到什么问题。
### 29、BLOB和TEXT有什么区别？
### 30、什么是存储过程？有哪些优缺点？




## 全部答案，整理好了，直接下载吧

### 下载链接：[全部答案，整理好了](https://www.souyunku.com/wp-content/uploads/weixin/githup-weixin-2.png)




## 最新，高清PDF：172份，7701页，最新整理

[![大厂面试题](https://www.souyunku.com/wp-content/uploads/weixin/mst.png "架构师专栏")](https://www.souyunku.com/wp-content/uploads/weixin/githup-weixin.png "架构师专栏")

[![大厂面试题](https://www.souyunku.com/wp-content/uploads/weixin/githup-weixin.png "架构师专栏")](https://www.souyunku.com/wp-content/uploads/weixin/githup-weixin.png "架构师专栏")
