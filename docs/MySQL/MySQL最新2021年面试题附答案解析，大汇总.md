# MySQL最新2021年面试题附答案解析，大汇总







### 1、数据库索引的原理，为什么要用 B+树，为什么不用二叉树？

可以从几个维度去看这个问题，查询是否够快，效率是否稳定，存储数据多少，以及查找磁盘次数，为什么不是二叉树，为什么不是平衡二叉树，为什么不是B树，而偏偏是B+树呢？

**为什么不是一般二叉树？**

如果二叉树特殊化为一个链表，相当于全表扫描。平衡二叉树相比于二叉查找树来说，查找效率更稳定，总体的查找速度也更快。

**为什么不是平衡二叉树呢？**

我们知道，在内存比在磁盘的数据，查询效率快得多。如果树这种数据结构作为索引，那我们每查找一次数据就需要从磁盘中读取一个节点，也就是我们说的一个磁盘块，但是平衡二叉树可是每个节点只存储一个键值和数据的，如果是B树，可以存储更多的节点数据，树的高度也会降低，因此读取磁盘的次数就降下来啦，查询效率就快啦。

**那为什么不是B树而是B+树呢？**

1）B+树非叶子节点上是不存储数据的，仅存储键值，而B树节点中不仅存储键值，也会存储数据。innodb中页的默认大小是16KB，如果不存储数据，那么就会存储更多的键值，相应的树的阶数（节点的子节点树）就会更大，树就会更矮更胖，如此一来我们查找数据进行磁盘的IO次数有会再次减少，数据查询的效率也会更快。

2）B+树索引的所有数据均存储在叶子节点，而且数据是按照顺序排列的，链表连着的。那么B+树使得范围查找，排序查找，分组查找以及去重查找变得异常简单。


### 2、MySQL中都有哪些触发器？

MySQL 数据库中有六种触发器：

**1、** Before Insert

**2、** After Insert

**3、** Before Update

**4、** After Update

**5、** Before Delete

**6、** After Delete


### 3、如何写sql能够有效的使用到复合索引。

复合索引，也叫组合索引，用户可以在多个列上建立索引,这种索引叫做复合索引。

当我们创建一个组合索引的时候，如(k1,k2,k3)，相当于创建了（k1）、(k1,k2)和(k1,k2,k3)三个索引，这就是最左匹配原则。

```
select * from table where k1=A AND k2=B AND k3=D
```

有关于复合索引，我们需要关注查询Sql条件的顺序，确保最左匹配原则有效，同时可以删除不必要的冗余索引。


### 4、一条sql执行过长的时间，你如何优化，从哪些方面入手？

**1、** 查看是否涉及多表和子查询，优化Sql结构，如去除冗余字段，是否可拆表等

**2、** 优化索引结构，看是否可以适当添加索引

**3、** 数量大的表，可以考虑进行分离/分表（如交易流水表）

**4、** 数据库主从分离，读写分离

**5、** explain分析sql语句，查看执行计划，优化sql

**6、** 查看MySQL执行日志，分析是否有其他方面的问题


### 5、列设置为AUTO INCREMENT时，如果在表中达到最大值，会发生什么情况？

它会停止递增，任何进一步的插入都将产生错误，因为密钥已被使用。


### 6、CHAR和VARCHAR的区别？

**1、** CHAR和VARCHAR类型在存储和检索方面有所不同

**2、** CHAR列长度固定为创建表时声明的长度，长度值范围是1到255当CHAR值被存储时，它们被用空格填充到特定长度，检索CHAR值时需删除尾随空格。


### 7、为什么要使用视图？什么是视图？

**为什么要使用视图？**

为了提高复杂SQL语句的复用性和表操作的安全性，MySQL数据库管理系统提供了视图特性。

**什么是视图？**

视图是一个虚拟的表，是一个表中的数据经过某种筛选后的显示方式，视图由一个预定义的查询select语句组成。


### 8、聚集索引与非聚集索引的区别

**1、** 一个表中只能拥有一个聚集索引，而非聚集索引一个表可以存在多个。

**2、** 聚集索引，索引中键值的逻辑顺序决定了表中相应行的物理顺序；非聚集索引，索引中索引的逻辑顺序与磁盘上行的物理存储顺序不同。

**3、** 索引是通过二叉树的数据结构来描述的，我们可以这么理解聚簇索引：索引的叶节点就是数据节点。而非聚簇索引的叶节点仍然是索引节点，只不过有一个指针指向对应的数据块。

**4、** 聚集索引：物理存储按照索引排序；非聚集索引：物理存储不按照索引排序；


### 9、什么是锁？

数据库是一个多用户使用的共享资源。当多个用户并发地存取数据时，在数据库中就会产生多个事务同时存取同一数据的情况。若对并发操作不加控制就可能会读取和存储不正确的数据，破坏数据库的一致性。

加锁是实现数据库并发控制的一个非常重要的技术。当事务在对某个数据对象进行操作前，先向系统发出请求，对其加锁。加锁后事务就对该数据对象有了一定的控制，在该事务释放锁之前，其他的事务不能对此数据对象进行更新操作。


### 10、一条SQL语句在MySQL中如何执行的？

先看一下MySQL的逻辑架构图吧~

**「查询语句：」**

**1、** 先检查该语句是否有权限

**2、** 如果没有权限，直接返回错误信息

**3、** 如果有权限，在 MySQL8.0 版本以前，会先查询缓存。

**4、** 如果没有缓存，分析器进行词法分析，提取 sql 语句select等的关键元素。然后判断sql 语句是否有语法错误，比如关键词是否正确等等。

**5、** 优化器进行确定执行方案

**6、** 进行权限校验，如果没有权限就直接返回错误信息，如果有权限就会调用数据库引擎接口，返回执行结果。


### 11、优化器的执行过程？
### 12、按照锁的粒度分，数据库锁有哪些呢？锁机制与InnoDB锁算法
### 13、索引的数据结构（b树，hash）
### 14、事务的隔离级别有哪些？MySQL的默认隔离级别是什么？
### 15、可以使用多少列创建索引？
### 16、存储时期
### 17、谈谈MySQL的Explain
### 18、怎样才能找出最后一次插入时分配了哪个自动增量？
### 19、对MySQL的锁了解吗
### 20、NULL是什么意思
### 21、视图有哪些特点？哪些使用场景？
### 22、说说MySQL 的基础架构图
### 23、什么是基本表？什么是视图？
### 24、500台db，在最快时间之内重启。
### 25、为什么要优化
### 26、完整性约束包括哪些？
### 27、优化关联查询
### 28、优化LIMIT分页
### 29、列对比运算符是什么？
### 30、SQL语句优化的一些方法




## 全部答案，整理好了，直接下载吧

### 下载链接：[全部答案，整理好了](https://www.souyunku.com/wp-content/uploads/weixin/githup-weixin-2.png)




## 最新，高清PDF：172份，7701页，最新整理

[![大厂面试题](https://www.souyunku.com/wp-content/uploads/weixin/mst.png "架构师专栏")](https://www.souyunku.com/wp-content/uploads/weixin/githup-weixin.png "架构师专栏")

[![大厂面试题](https://www.souyunku.com/wp-content/uploads/weixin/githup-weixin.png "架构师专栏")](https://www.souyunku.com/wp-content/uploads/weixin/githup-weixin.png "架构师专栏")
