# MySQL最新面试题2021年，常见面试题及答案汇总







### 1、非聚簇索引一定会回表查询吗？

不一定，这涉及到查询语句所要求的字段是否全部命中了索引，如果全部命中了索引，那么就不必再进行回表查询。

**举个简单的例子**

假设我们在员工表的年龄上建立了索引，那么当进行`select age from employee where age < 20`的查询时，在索引的叶子节点上，已经包含了age信息，不会再次进行回表查询。


### 2、MySQL数据库cpu飙升的话，要怎么处理呢？

**排查过程：**

**1、** 使用top 命令观察，确定是MySQLd导致还是其他原因。

**2、** 如果是MySQLd导致的，show processlist，查看session情况，确定是不是有消耗资源的sql在运行。

**3、** 找出消耗高的 sql，看看执行计划是否准确， 索引是否缺失，数据量是否太大。

**处理：**

**1、** kill 掉这些线程(同时观察 cpu 使用率是否下降)，

**2、** 进行相应的调整(比如说加索引、改 sql、改内存参数)

**3、** 重新跑这些 SQL。

**其他情况：**

也有可能是每个 sql 消耗资源并不多，但是突然之间，有大量的 session 连进来导致 cpu 飙升，这种情况就需要跟应用一起来分析为何连接数会激增，再做出相应的调整，比如说限制连接数等


### 3、MySQL中都有哪些触发器？

**在MySQL数据库中有如下六种触发器：**

**1、** Before Insert

**2、** After Insert

**3、** Before Update

**4、** After Update

**5、** Before Delete

**6、** After Delete


### 4、什么是游标？

游标是系统为用户开设的一个数据缓冲区，存放SQL语句的执行结果，每个游标区都有一个名字。用户可以通过游标逐一获取记录并赋给主变量，交由主语言进一步处理。


### 5、简单总结下

**1、** MySQL使用B+Tree作为索引数据结构。

**2、** B+Tree在新增数据时，会根据索引指定列的值对旧的B+Tree做调整。

**4、** 从物理存储结构上说，B-Tree和B+Tree都以页(4K)来划分节点的大小，但是由于B+Tree中中间节点不存储数据，因此B+Tree能够在同样大小的节点中，存储更多的key，提高查找效率。

**5、** 影响MySQL查找性能的主要还是磁盘IO次数，大部分是磁头移动到指定磁道的时间花费。

**6、** MyISAM存储引擎下索引和数据存储是分离的，InnoDB索引和数据存储在一起。

**7、** InnoDB存储引擎下索引的实现，(辅助索引)全部是依赖于主索引建立的(辅助索引中叶子结点存储的并不是数据的地址，还是主索引的值，因此，所有依赖于辅助索引的都是先根据辅助索引查到主索引，再根据主索引查数据的地址)。

**8、** 由于InnoDB索引的特性，因此如果主索引不是自增的(id作主键)，那么每次插入新的数据，都很可能对B+Tree的主索引进行重整，影响性能。因此，尽量以自增id作为InnoDB的主索引。




### 6、使用B+树的好处

由于B+树的内部节点只存放键，不存放值，因此，一次读取，可以在内存页中获取更多的键，有利于更快地缩小查找范围。 B+树的叶节点由一条链相连，因此，当需要进行一次全数据遍历的时候，B+树只需要使用O(logN)时间找到最小的一个节点，然后通过链进行O(N)的顺序遍历即可。而B树则需要对树的每一层进行遍历，这会需要更多的内存置换次数，因此也就需要花费更多的时间


### 7、MyISAM表格将在哪里存储，并且还提供其存储格式？

每个MyISAM表格以三种格式存储在磁盘上：

·“.frm”文件存储表定义

·数据文件具有“.MYD”（MYData）扩展名

索引文件具有“.MYI”（MYIndex）扩展名


### 8、使用乐观锁

乐观锁思想就是，有线程过来，先放过去修改，如果看到别的线程没修改过，就可以修改成功，如果别的线程修改过，就修改失败或者重试。实现方式：乐观锁一般会使用版本号机制或CAS算法实现。


### 9、NULL是什么意思

NULL这个值表示UNKNOWN(未知):它不表示“”(空字符串)。对NULL这个值的任何比较都会生产一个NULL值。您不能把任何值与一个 NULL值进行比较，并在逻辑上希望获得一个答案。

使用IS  NULL来进行NULL判断


### 10、count(1)、count(*) 与 count(列名) 的区别？

**1、** count(*)包括了所有的列，相当于行数，在统计结果的时候，不会忽略列值为NULL

**2、** count(1)包括了忽略所有列，用1代表代码行，在统计结果的时候，不会忽略列值为NULL

**3、** count(列名)只包括列名那一列，在统计结果的时候，会忽略列值为空（这里的空不是只空字符串或者0，而是表示null）的计数，即某个字段值为NULL时，不统计。


### 11、视图的优点
### 12、MySQL为什么这么设计
### 13、主键索引与唯一索引的区别
### 14、varchar(50)中50的涵义
### 15、一个6亿的表a，一个3亿的表b，通过外间tid关联，你如何最快的查询出满足条件的第50000到第50200中的这200条数据记录。
### 16、MySQL数据库作发布系统的存储，一天五万条以上的增量，预计运维三年,怎么优化？
### 17、SQL语句的语法顺序：
### 18、存储时期
### 19、隔离级别与锁的关系
### 20、索引哪些情况会失效
### 21、说说对SQL语句优化有哪些方法？（选择几条）
### 22、说一下数据库的三大范式
### 23、什么是锁？
### 24、大表怎么优化？分库分表了是怎么做的？分表分库了有什么问题？有用到中间件么？他们的原理知道么？
### 25、索引的底层实现
### 26、大表数据查询，怎么优化
### 27、优化WHERE子句
### 28、MYSQL的主从延迟，你怎么解决？
### 29、最左匹配原则？
### 30、什么是数据库连接池?为什么需要数据库连接池呢?




## 全部答案，整理好了，直接下载吧

### 下载链接：[全部答案，整理好了](https://www.souyunku.com/wp-content/uploads/weixin/githup-weixin-2.png)




## 最新，高清PDF：172份，7701页，最新整理

[![大厂面试题](https://www.souyunku.com/wp-content/uploads/weixin/mst.png "架构师专栏")](https://www.souyunku.com/wp-content/uploads/weixin/githup-weixin.png "架构师专栏")

[![大厂面试题](https://www.souyunku.com/wp-content/uploads/weixin/githup-weixin.png "架构师专栏")](https://www.souyunku.com/wp-content/uploads/weixin/githup-weixin.png "架构师专栏")
